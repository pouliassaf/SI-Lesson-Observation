import streamlit as st
from openpyxl import load_workbook
from openpyxl.worksheet.worksheet import Worksheet
from datetime import datetime, timedelta, date
import os
import statistics
import pandas as pd
import matplotlib.pyplot as plt
import csv
import math
import io
from openpyxl.utils import get_column_letter # Import get_column_letter

# Import ReportLab modules for PDF generation
from reportlab.lib.pagesizes import letter
from reportlab.platypus import SimpleDocTemplate, Paragraph, Spacer, Table, TableStyle, Image # Import Image
from reportlab.lib.styles import getSampleStyleSheet, ParagraphStyle
from reportlab.lib.units import inch
from reportlab.lib import colors
import re # Import regex for cleaning HTML tags

# --- Set Streamlit Page Config (MUST BE THE FIRST STREAMLIT COMMAND) ---
st.set_page_config(page_title="Lesson Observation Tool", layout="wide")

# --- Logo File Paths ---
# Define a dictionary mapping school names to logo file paths
# Ensure these paths are correct relative to your script location
# Add more school logos here as needed
LOGO_PATHS = {
    "Default": "logos/default.jpeg", # Default logo for schools not listed
    "Al Bayan School": "logos/CS_Al Bayan Charter School_Logo.png",
    "Al Bayraq School": "logos/CS_Al Bayraq_Logo_PNG.png",
    "Al Dhaher School": "logos/CS_Al Dhaher_Logo_PNG.png",
    "Al Hosoon School": "logos/CS_Al Hosoon Charter School_Logo.png",
    "Al Mutanabi School": "logos/CS_Al Mutanabi_Logo_PNG.png",
    "Al Nahdha School": "logos/CS_Al Nahdha_Logo_PNG.png",
    "Jern Yafoor School": "logos/CS_Jern Yafoor_Logo_PNG.png",
    "Maryam Bint Omran School": "logos/CS_Maryam Bint Omran_Logo_PNG.png",
    # Add other school logos here following the pattern:
    # "School Name as it appears in the app": "logos/your_logo_file.png",
}


# --- Text Strings for Localization ---
# You need to replace the placeholder Arabic strings with actual translations
en_strings = {
    "page_title": "Lesson Observation Tool", # Reverted to Lesson Observation
    "sidebar_select_page": "Choose a page:",
    "page_lesson_input": "Lesson Observation Input", # Reverted to Lesson Observation
    "page_analytics": "Lesson Observation Analytics", # Reverted to Lesson Observation
    "title_lesson_input": "Weekly Lesson Observation Input Tool", # Reverted to Lesson Observation
    "info_default_workbook": "Using default template workbook:",
    "warning_default_not_found": "Default template workbook '{}' not found. Please upload a workbook.",
    "error_opening_default": "Error opening default template file:",
    "success_lo_sheets_found": "Found {} LO sheets in workbook.",
    "select_sheet_or_create": "Select existing LO sheet or create a new one:",
    "option_create_new": "Create new",
    "success_sheet_created": "Created new sheet: {}",
    "error_template_not_found": "Error: 'LO 1' template sheet not found in the workbook! Cannot create new sheet.",
    "subheader_filling_data": "Filling data for: {}",
    "label_observer_name": "Observer Name",
    "label_teacher_name": "Teacher Name",
    "label_teacher_email": "Teacher Email",
    "label_operator": "Operator",
    "label_school_name": "School Name",
    "label_grade": "Grade",
    "label_subject": "Subject",
    "label_gender": "Gender",
    "label_students": "Number of Students",
    "label_males": "Number of Males",
    "label_females": "Number of Females",
    "label_time_in": "Time In",
    "label_time_out": "Time Out",
    "label_lesson_duration": "üïí **Lesson Duration:** {} minutes ‚Äî _{}_",
    "duration_full_lesson": "Full Lesson",
    "duration_walkthrough": "Walkthrough",
    "warning_calculate_duration": "Please enter both 'Time In' and 'Time Out' to calculate duration.",
    "warning_could_not_calculate_duration": "Could not calculate lesson duration:",
    "label_period": "Period",
    "label_obs_type": "Observation Type", # Reverted to Observation Type
    "option_individual": "Individual",
    "option_joint": "Joint",
    "subheader_rubric_scores": "Rubric Scores",
    "expander_rubric_descriptors": "Rubric Descriptors",
    "info_no_descriptors": "No rubric descriptors available for this element.",
    "label_rating_for": "Rating for {}",
    "checkbox_send_feedback": "‚úâÔ∏è Send Feedback to Teacher",
    "button_save_observation": "üíæ Save Observation", # Reverted to Save Observation
    "warning_fill_essential": "Please fill in all basic information fields before saving.",
    "success_data_saved": "Observation data saved to {} in {}", # Reverted to Observation data
    "error_saving_workbook": "Error saving workbook:",
    "download_workbook": "üì• Download updated workbook",
    "feedback_subject": "Lesson Observation Feedback", # Reverted to Lesson Observation
    "feedback_greeting": "Dear {},\n\nYour lesson observation from {} has been saved.\n\n", # Reverted to lesson observation
    "feedback_observer": "Observer: {}\n",
    "feedback_duration": "Duration: {}\n",
    "feedback_subject_fb": "Subject: {}\n", # Renamed to avoid conflict with label_subject
    "feedback_school": "School: {}\n\n",
    "feedback_summary_header": "Here is a summary of your ratings based on the rubric:\n\n",
    "feedback_domain_header": "**{}: {}**\n", # Domain number and title
    "feedback_element_rating": "- **{}:** Rating **{}**\n", # Element label and rating
    "feedback_descriptor_for_rating": "  *Descriptor for rating {}:* {}\n", # Descriptor for specific rating
    "feedback_overall_score": "\n**Overall Average Score:** {:.2f}\n\n", # Added for overall score
    "feedback_domain_average": "  *Domain Average:* {:.2f}\n", # Added for domain average
    "feedback_performance_summary": "**Performance Summary:**\n", # Header for performance summary
    "feedback_overall_performance": "Overall: {}\n", # Overall performance level
    "feedback_domain_performance": "{}: {}\n", # Domain performance level
    "feedback_support_plan_intro": "\n**Support Plan Recommended:**\n", # Intro for support plan
    "feedback_next_steps_intro": "\n**Suggested Next Steps:**\n", # Intro for next steps
    "feedback_closing": "\nBased on these ratings, please review your updated workbook for detailed feedback and areas for development.\n\n",
    "feedback_regards": "Regards,\nSchool Leadership Team",
    "success_feedback_generated": "Feedback generated (simulated):\n\n",
    "success_feedback_log_updated": "Feedback log updated in {}",
    "error_updating_log": "Error updating feedback log in workbook:",
    "title_analytics": "Lesson Observation Analytics Dashboard", # Reverted to Lesson Observation
    "warning_no_lo_sheets_analytics": "No 'LO ' sheets found in the workbook for analytics.",
    "subheader_avg_score_overall": "Average Score per Domain (Across all observations)", # Reverted to observations
    "info_no_numeric_scores_overall": "No numeric scores found across all observations to calculate overall domain averages.", # Reverted to observations
    "subheader_data_summary": "Observation Data Summary", # Reverted to Observation
    "subheader_filter_analyze": "Filter and Analyze",
    "filter_by_school": "Filter by School",
    "filter_by_grade": "Filter by Grade",
    "filter_by_subject": "Filter by Subject",
    "option_all": "All",
    "subheader_avg_score_filtered": "Average Score per Domain (Filtered)",
    "info_no_numeric_scores_filtered": "No observations matching the selected filters contain numeric scores for domain averages.", # Reverted to observations
    "subheader_observer_distribution": "Observer Distribution (Filtered)",
    "info_no_observer_data_filtered": "No observer data found for the selected filters.",
    "info_no_observation_data_filtered": "No observation data found for the selected filters.", # Reverted to observation
    "error_loading_analytics": "Error loading or processing workbook for analytics:",
    "overall_score_label": "Overall Score:", # Label for displaying overall score
    "overall_score_value": "**{:.2f}**", # Format for displaying overall score
    "overall_score_na": "**N/A**", # Display for no numeric scores
    "arabic_toggle_label": "ÿπÿ±ÿ∂ ÿ®ÿßŸÑŸÑÿ∫ÿ© ÿßŸÑÿπÿ±ÿ®Ÿäÿ© (Display in Arabic)",
    "feedback_log_sheet_name": "Feedback Log",
    "feedback_log_header": ["Sheet", "Teacher", "Email", "Observer", "School", "Subject", "Date", "Summary"],
    "download_feedback_log_csv": "üì• Download Feedback Log (CSV)",
    "error_generating_log_csv": "Error generating log CSV:",
    "download_overall_avg_csv": "üì• Download Overall Domain Averages (CSV)",
    "download_overall_avg_excel": "üì• Download Overall Domain Averages (Excel)",
    "download_filtered_avg_csv": "üì• Download Filtered Domain Averages (CSV)",
    "download_filtered_avg_excel": "üì• Download Filtered Domain Averages (Excel)",
    "download_filtered_data_csv": "üì• Download Filtered Observation Data (CSV)", # Reverted to Observation
    "download_filtered_data_excel": "üì• Download Filtered Observation Data (Excel)", # Reverted to Observation
    "label_observation_date": "Observation Date", # Reverted to Observation
    "filter_start_date": "Start Date", # New string for start date filter
    "filter_end_date": "End Date", # New string for end date filter
    "filter_teacher": "Filter by Teacher", # New string for teacher filter
    "subheader_teacher_performance": "Teacher Performance Over Time", # New subheader
    "info_select_teacher": "Select a teacher to view individual performance analytics.",
    "info_no_obs_for_teacher": "No observations found for the selected teacher within the applied filters.", # Reverted to observations
    "subheader_teacher_domain_trend": "{} Domain Performance Trend", # New subheader for teacher trend chart
    "subheader_teacher_overall_avg": "{} Overall Average Score (Filtered)", # New subheader for teacher overall avg

    # Performance Level Descriptors (English)
    "perf_level_very_weak": "Very Weak",
    "perf_level_weak": "Weak",
    "perf_level_acceptable": "Acceptable",
    "perf_level_good": "Good",
    "perf_level_excellent": "Excellent",

    # Support Plan / Next Steps Text (English) - **Customize these extensively**
    # More detailed recommendations based on performance levels
    "plan_very_weak_overall": "Overall performance is Very Weak. A comprehensive support plan is required. Focus on fundamental teaching practices such as classroom management, lesson planning, and basic instructional strategies. Seek guidance from your mentor teacher and school leadership.",
    "plan_weak_overall": "Overall performance is Weak. A support plan is recommended. Identify 1-2 key areas for improvement from the observation and work with your mentor teacher to develop targeted strategies. Consider observing experienced colleagues in these areas.",
    "plan_weak_domain": "Performance in **{}** is Weak. Focus on developing skills related to: {}. Suggested actions include: [Specific action 1], [Specific action 2].", # Domain Name, specific elements
    "steps_acceptable_overall": "Overall performance is Acceptable. Continue to build on your strengths. Identify one area for growth to refine your practice and enhance student learning.",
    "steps_good_overall": "Overall performance is Good. You demonstrate effective teaching practices. Explore opportunities to share your expertise with colleagues, perhaps through informal mentoring or presenting successful strategies.",
    "steps_good_domain": "Performance in **{}** is Good. You demonstrate strong skills in this area. Consider exploring advanced strategies related to: {}. Suggested actions include: [Specific advanced action 1], [Specific advanced action 2].", # Domain Name, specific elements
    "steps_excellent_overall": "Overall performance is Excellent. You are a role model for effective teaching. Consider leading professional development sessions or mentoring less experienced teachers.",
    "steps_excellent_domain": "Performance in **{}** is Excellent. Your practice in this area is exemplary. Continue to innovate and refine your practice, perhaps by researching and implementing cutting-edge strategies related to: {}.", # Domain Name, specific elements
    "no_specific_plan_needed": "Performance is at an acceptable level or above. No immediate support plan required based on this observation. Focus on continuous improvement based on your professional goals."
}

# Placeholder Arabic strings - REPLACE THESE WITH ACTUAL TRANSLATIONS
ar_strings = {
    "page_title": "ÿ£ÿØÿßÿ© ÿßŸÑÿ™ŸÇŸäŸäŸÖ ŸÑŸÑÿ≤Ÿäÿßÿ±ÿßÿ™ ÿßŸÑÿµŸÅŸäÿ©", # User's preferred translation
    "sidebar_select_page": "ÿßÿÆÿ™ÿ± ÿµŸÅÿ≠ÿ©:", # Updated translation
    "page_lesson_input": "ÿßÿØÿÆÿßŸÑ ÿ™ŸÇŸäŸäŸÖ ÿßŸÑÿ≤Ÿäÿßÿ±ÿ©", # User's preferred translation
    "page_analytics": "ÿ™ÿ≠ŸÑŸäŸÑÿßÿ™ ÿßŸÑÿ≤Ÿäÿßÿ±ÿ©", # User's preferred translation
    "title_lesson_input": "ÿ£ÿØÿßÿ© ÿ•ÿØÿÆÿßŸÑ ÿ≤Ÿäÿßÿ±ÿ© ÿµŸÅŸäÿ© ÿ£ÿ≥ÿ®ŸàÿπŸäÿ©", # Updated translation
    "info_default_workbook": "ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ŸÖÿµŸÜŸÅ ÿßŸÑŸÇÿßŸÑÿ® ÿßŸÑÿßŸÅÿ™ÿ±ÿßÿ∂Ÿä:", # Guessed translation
    "warning_default_not_found": "ÿ™ÿ≠ÿ∞Ÿäÿ±: ŸÑŸÖ Ÿäÿ™ŸÖ ÿßŸÑÿπÿ´Ÿàÿ± ÿπŸÑŸâ ŸÖÿµŸÜŸÅ ÿßŸÑŸÇÿßŸÑÿ® ÿßŸÑÿßŸÅÿ™ÿ±ÿßÿ∂Ÿä '{}'. Ÿäÿ±ÿ¨Ÿâ ÿ™ÿ≠ŸÖŸäŸÑ ŸÖÿµŸÜŸÅ.", # Guessed translation
    "error_opening_default": "ÿÆÿ∑ÿ£ ŸÅŸä ŸÅÿ™ÿ≠ ŸÖŸÑŸÅ ÿßŸÑŸÇÿßŸÑÿ® ÿßŸÑÿßŸÅÿ™ÿ±ÿßÿ∂Ÿä:", # Guessed translation
    "success_lo_sheets_found": "ÿ™ŸÖ ÿßŸÑÿπÿ´Ÿàÿ± ÿπŸÑŸâ {} ÿ£Ÿàÿ±ÿßŸÇ LO ŸÅŸä ÿßŸÑŸÖÿµŸÜŸÅ.", # Guessed translation
    "select_sheet_or_create": "ÿ≠ÿØÿØ Ÿàÿ±ŸÇÿ© LO ŸÖŸàÿ¨ŸàÿØÿ© ÿ£Ÿà ÿ£ŸÜÿ¥ÿ¶ Ÿàÿßÿ≠ÿØÿ© ÿ¨ÿØŸäÿØÿ©:", # Guessed translation
    "option_create_new": "ÿ•ŸÜÿ¥ÿßÿ° ÿ¨ÿØŸäÿØ", # Guessed translation
    "success_sheet_created": "ÿ™ŸÖ ÿ•ŸÜÿ¥ÿßÿ° Ÿàÿ±ŸÇÿ© ÿ¨ÿØŸäÿØÿ©: {}", # Guessed translation
    "error_template_not_found": "ÿÆÿ∑ÿ£: ŸÑŸÖ Ÿäÿ™ŸÖ ÿßŸÑÿπÿ´Ÿàÿ± ÿπŸÑŸâ Ÿàÿ±ŸÇÿ© ÿßŸÑŸÇÿßŸÑÿ® 'LO 1' ŸÅŸä ÿßŸÑŸÖÿµŸÜŸÅ! ŸÑÿß ŸäŸÖŸÉŸÜ ÿ•ŸÜÿ¥ÿßÿ° Ÿàÿ±ŸÇÿ© ÿ¨ÿØŸäÿØÿ©.", # Guessed translation
    "subheader_filling_data": "ŸÖŸÑÿ° ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ŸÑŸÄ: {}", # Guessed translation
    "label_observer_name": "ÿßÿ≥ŸÖ ÿßŸÑŸÖÿ±ÿßŸÇÿ®", # Guessed translation
    "label_teacher_name": "ÿßÿ≥ŸÖ ÿßŸÑŸÖÿπŸÑŸÖ", # Guessed translation
    "label_teacher_email": "ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä ŸÑŸÑŸÖÿπŸÑŸÖ", # Guessed translation
    "label_operator": "ÿßŸÑŸÖÿ¥ÿ∫ŸÑ", # Guessed translation
    "label_school_name": "ÿßÿ≥ŸÖ ÿßŸÑŸÖÿØÿ±ÿ≥ÿ©", # Guessed translation
    "label_grade": "ÿßŸÑÿµŸÅ", # Guessed translation
    "label_subject": "ÿßŸÑŸÖÿßÿØÿ©", # Guessed translation
    "label_gender": "ÿßŸÑÿ¨ŸÜÿ≥", # Guessed translation
    "label_students": "ÿπÿØÿØ ÿßŸÑÿ∑ŸÑÿßÿ®", # Guessed translation
    "label_males": "ÿπÿØÿØ ÿßŸÑÿ∞ŸÉŸàÿ±", # Guessed translation
    "label_females": "ÿπÿØÿØ ÿßŸÑÿ•ŸÜÿßÿ´", # Guessed translation
    "label_time_in": "ŸàŸÇÿ™ ÿßŸÑÿØÿÆŸàŸÑ", # Guessed translation
    "label_time_out": "ŸàŸÇÿ™ ÿßŸÑÿÆÿ±Ÿàÿ¨", # Guessed translation
    "label_lesson_duration": "üïí **ŸÖÿØÿ© ÿßŸÑÿØÿ±ÿ≥:** {} ÿØŸÇŸäŸÇÿ© ‚Äî _{}_", # Guessed translation
    "duration_full_lesson": "ÿØÿ±ÿ≥ ŸÉÿßŸÖŸÑ", # Guessed translation
    "duration_walkthrough": "ÿ¨ŸàŸÑÿ© ÿ≥ÿ±Ÿäÿπÿ©", # Guessed translation
    "warning_calculate_duration": "Ÿäÿ±ÿ¨Ÿâ ÿ•ÿØÿÆÿßŸÑ ŸàŸÇÿ™ ÿßŸÑÿØÿÆŸàŸÑ ŸàŸàŸÇÿ™ ÿßŸÑÿÆÿ±Ÿàÿ¨ ŸÑÿ≠ÿ≥ÿßÿ® ÿßŸÑŸÖÿØÿ©.", # Guessed translation
    "warning_could_not_calculate_duration": "ÿ™ÿπÿ∞ÿ± ÿ≠ÿ≥ÿßÿ® ŸÖÿØÿ© ÿßŸÑÿØÿ±ÿ≥:", # Guessed translation
    "label_period": "ÿßŸÑŸÅÿ™ÿ±ÿ©", # Guessed translation
    "label_obs_type": "ŸÜŸàÿπ ÿßŸÑÿ≤Ÿäÿßÿ±ÿ©", # Updated translation
    "option_individual": "ŸÅÿ±ÿØŸä", # Guessed translation
    "option_joint": "ŸÖÿ¥ÿ™ÿ±ŸÉ", # Guessed translation
    "subheader_rubric_scores": "ÿØÿ±ÿ¨ÿßÿ™ ÿßŸÑÿØŸÑŸäŸÑ", # Guessed translation
    "expander_rubric_descriptors": "ŸàÿßÿµŸÅÿßÿ™ ÿßŸÑÿØŸÑŸäŸÑ", # Guessed translation
    "info_no_descriptors": "ŸÑÿß ÿ™Ÿàÿ¨ÿØ ŸàÿßÿµŸÅÿßÿ™ ÿØŸÑŸäŸÑ ŸÖÿ™ÿßÿ≠ÿ© ŸÑŸáÿ∞ÿß ÿßŸÑÿπŸÜÿµÿ±.", # Guessed translation
    "label_rating_for": "ÿßŸÑÿ™ŸÇŸäŸäŸÖ ŸÑŸÄ {}", # Guessed translation
    "checkbox_send_feedback": "‚úâÔ∏è ÿ•ÿ±ÿ≥ÿßŸÑ ŸÖŸÑÿßÿ≠ÿ∏ÿßÿ™ ÿ•ŸÑŸâ ÿßŸÑŸÖÿπŸÑŸÖ", # Guessed translation
    "button_save_observation": "üíæ ÿ≠ŸÅÿ∏ ÿßŸÑÿ≤Ÿäÿßÿ±ÿ©", # Updated translation
    "warning_fill_essential": "Ÿäÿ±ÿ¨Ÿâ ŸÖŸÑÿ° ÿ¨ŸÖŸäÿπ ÿ≠ŸÇŸàŸÑ ÿßŸÑŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑÿ£ÿ≥ÿßÿ≥Ÿäÿ© ŸÇÿ®ŸÑ ÿßŸÑÿ≠ŸÅÿ∏.", # Guessed translation
    "success_data_saved": "ÿ™ŸÖ ÿ≠ŸÅÿ∏ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ≤Ÿäÿßÿ±ÿ© ŸÅŸä {} ŸÅŸä {}", # Updated translation
    "error_saving_workbook": "ÿÆÿ∑ÿ£ ŸÅŸä ÿ≠ŸÅÿ∏ ÿßŸÑŸÖÿµŸÜŸÅ:", # Guessed translation
    "download_workbook": "üì• ÿ™ŸÜÿ≤ŸäŸÑ ÿßŸÑŸÖÿµŸÜŸÅ ÿßŸÑŸÖÿ≠ÿØÿ´", # Guessed translation
    "feedback_subject": "ŸÖŸÑÿßÿ≠ÿ∏ÿßÿ™ ÿßŸÑÿ≤Ÿäÿßÿ±ÿ© ÿßŸÑÿµŸÅŸäÿ©", # Updated translation
    "feedback_greeting": "ÿπÿ≤Ÿäÿ≤Ÿä {},\n\nÿ™ŸÖ ÿ≠ŸÅÿ∏ ÿ≤Ÿäÿßÿ±ÿ™ŸÉ ÿßŸÑÿµŸÅŸäÿ© ŸÖŸÜ {}.\n\n", # Updated translation
    "feedback_observer": "ÿßŸÑŸÖÿ±ÿßŸÇÿ®: {}\n", # Guessed translation
    "feedback_duration": "ÿßŸÑŸÖÿØÿ©: {}\n", # Guessed translation
    "feedback_subject_fb": "ÿßŸÑŸÖÿßÿØÿ©: {}\n", # Guessed translation
    "feedback_school": "ÿßŸÑŸÖÿØÿ±ÿ≥ÿ©: {}\n\n", # Guessed translation
    "feedback_summary_header": "ÿ•ŸÑŸäŸÉ ŸÖŸÑÿÆÿµ ŸÑÿ™ŸÇŸäŸäŸÖÿßÿ™ŸÉ ÿ®ŸÜÿßÿ°Ÿã ÿπŸÑŸâ ÿßŸÑÿØŸÑŸäŸÑ:\n\n", # Guessed translation
    "feedback_domain_header": "**{}: {}**\n", # Guessed translation
    "feedback_element_rating": "- **{}:** ÿßŸÑÿ™ŸÇŸäŸäŸÖ **{}**\n", # Guessed translation
    "feedback_descriptor_for_rating": "  *ŸàÿßÿµŸÅ ŸÑŸÑÿ™ŸÇŸäŸäŸÖ {}:* {}\n", # Guessed translation
    "feedback_overall_score": "\n**ŸÖÿ™Ÿàÿ≥ÿ∑ ÿßŸÑÿØÿ±ÿ¨ÿ© ÿßŸÑÿ•ÿ¨ŸÖÿßŸÑŸä:** {:.2f}\n\n", # Guessed translation
    "feedback_domain_average": "  *ŸÖÿ™Ÿàÿ≥ÿ∑ ÿßŸÑŸÖÿ¨ÿßŸÑ:* {:.2f}\n", # Guessed translation
    "feedback_performance_summary": "**ŸÖŸÑÿÆÿµ ÿßŸÑÿ£ÿØÿßÿ°:**\n", # Guessed translation
    "feedback_overall_performance": "ÿßŸÑÿ•ÿ¨ŸÖÿßŸÑŸä: {}\n", # Guessed translation
    "feedback_domain_performance": "{}: {}\n", # Guessed translation
    "feedback_support_plan_intro": "\n**ÿÆÿ∑ÿ© ÿßŸÑÿØÿπŸÖ ÿßŸÑŸÖŸàÿµŸâ ÿ®Ÿáÿß:**\n", # Guessed translation
    "feedback_next_steps_intro": "\n**ÿßŸÑÿÆÿ∑Ÿàÿßÿ™ ÿßŸÑÿ™ÿßŸÑŸäÿ© ÿßŸÑŸÖŸÇÿ™ÿ±ÿ≠ÿ©:**\n", # Guessed translation
    "feedback_closing": "\nÿ®ŸÜÿßÿ°Ÿã ÿπŸÑŸâ Ÿáÿ∞Ÿá ÿßŸÑÿ™ŸÇŸäŸäŸÖÿßÿ™ÿå Ÿäÿ±ÿ¨Ÿâ ŸÖÿ±ÿßÿ¨ÿπÿ© ÿßŸÑŸÖÿµŸÜŸÅ ÿßŸÑŸÖÿ≠ÿØÿ´ ŸÑŸÑÿ≠ÿµŸàŸÑ ÿπŸÑŸâ ŸÖŸÑÿßÿ≠ÿ∏ÿßÿ™ ÿ™ŸÅÿµŸäŸÑŸäÿ© ŸàŸÖÿ¨ÿßŸÑÿßÿ™ ÿßŸÑÿ™ÿ∑ŸàŸäÿ±.\n\n", # Guessed translation
    "feedback_regards": "ŸÖÿπ ÿßŸÑÿ™ÿ≠Ÿäÿßÿ™,\nŸÅÿ±ŸäŸÇ ŸÇŸäÿßÿØÿ© ÿßŸÑŸÖÿØÿ±ÿ≥ÿ©", # Guessed translation
    "success_feedback_generated": "ÿ™ŸÖ ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑŸÖŸÑÿßÿ≠ÿ∏ÿßÿ™ (ŸÖÿ≠ÿßŸÉÿßÿ©):\n\n", # Guessed translation
    "success_feedback_log_updated": "ÿ™ŸÖ ÿ™ÿ≠ÿØŸäÿ´ ÿ≥ÿ¨ŸÑ ÿßŸÑŸÖŸÑÿßÿ≠ÿ∏ÿßÿ™ ŸÅŸä {}", # Guessed translation
    "error_updating_log": "ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≠ÿØŸäÿ´ ÿ≥ÿ¨ŸÑ ÿßŸÑŸÖŸÑÿßÿ≠ÿ∏ÿßÿ™ ŸÅŸä ÿßŸÑŸÖÿµŸÜŸÅ:", # Guessed translation
    "title_analytics": "ŸÑŸàÿ≠ÿ© ÿ™ÿ≠ŸÑŸäŸÑÿßÿ™ ÿßŸÑÿ≤Ÿäÿßÿ±ÿ© ÿßŸÑÿµŸÅŸäÿ©", # Updated translation
    "warning_no_lo_sheets_analytics": "ŸÑŸÖ Ÿäÿ™ŸÖ ÿßŸÑÿπÿ´Ÿàÿ± ÿπŸÑŸâ ÿ£Ÿàÿ±ÿßŸÇ 'LO ' ŸÅŸä ÿßŸÑŸÖÿµŸÜŸÅ ŸÑŸÑÿ™ÿ≠ŸÑŸäŸÑÿßÿ™.", # Guessed translation
    "subheader_avg_score_overall": "ŸÖÿ™Ÿàÿ≥ÿ∑ ÿßŸÑÿØÿ±ÿ¨ÿ© ŸÑŸÉŸÑ ŸÖÿ¨ÿßŸÑ (ÿπÿ®ÿ± ÿ¨ŸÖŸäÿπ ÿßŸÑÿ≤Ÿäÿßÿ±ÿßÿ™)", # Updated translation
    "info_no_numeric_scores_overall": "ŸÑŸÖ Ÿäÿ™ŸÖ ÿßŸÑÿπÿ´Ÿàÿ± ÿπŸÑŸâ ÿØÿ±ÿ¨ÿßÿ™ ÿ±ŸÇŸÖŸäÿ© ÿπÿ®ÿ± ÿ¨ŸÖŸäÿπ ÿßŸÑÿ≤Ÿäÿßÿ±ÿßÿ™ ŸÑÿ≠ÿ≥ÿßÿ® ŸÖÿ™Ÿàÿ≥ÿ∑ÿßÿ™ ÿßŸÑŸÖÿ¨ÿßŸÑ ÿßŸÑÿ•ÿ¨ŸÖÿßŸÑŸäÿ©.", # Updated translation
    "subheader_data_summary": "ŸÖŸÑÿÆÿµ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ≤Ÿäÿßÿ±ÿ©", # Updated translation
    "subheader_filter_analyze": "ÿ™ÿµŸÅŸäÿ© Ÿàÿ™ÿ≠ŸÑŸäŸÑ", # Guessed translation
    "filter_by_school": "ÿ™ÿµŸÅŸäÿ© ÿ≠ÿ≥ÿ® ÿßŸÑŸÖÿØÿ±ÿ≥ÿ©", # Guessed translation
    "filter_by_grade": "ÿ™ÿµŸÅŸäÿ© ÿ≠ÿ≥ÿ® ÿßŸÑÿµŸÅ", # Guessed translation
    "filter_by_subject": "ÿ™ÿµŸÅŸäÿ© ÿ≠ÿ≥ÿ® ÿßŸÑŸÖÿßÿØÿ©", # Guessed translation
    "option_all": "ÿßŸÑŸÉŸÑ", # Guessed translation
    "subheader_avg_score_filtered": "ŸÖÿ™Ÿàÿ≥ÿ∑ ÿßŸÑÿØÿ±ÿ¨ÿ© ŸÑŸÉŸÑ ŸÖÿ¨ÿßŸÑ (ŸÖÿµŸÅŸâ)", # Guessed translation
    "info_no_numeric_scores_filtered": "ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ≤Ÿäÿßÿ±ÿßÿ™ ŸÖÿ∑ÿßÿ®ŸÇÿ© ŸÑŸÑŸÖÿ±ÿ¥ÿ≠ÿßÿ™ ÿßŸÑŸÖÿ≠ÿØÿØÿ© ÿ™ÿ≠ÿ™ŸàŸä ÿπŸÑŸâ ÿØÿ±ÿ¨ÿßÿ™ ÿ±ŸÇŸÖŸäÿ© ŸÑŸÖÿ™Ÿàÿ≥ÿ∑ÿßÿ™ ÿßŸÑŸÖÿ¨ÿßŸÑ.", # Updated translation
    "subheader_observer_distribution": "ÿ™Ÿàÿ≤Ÿäÿπ ÿßŸÑŸÖÿ±ÿßŸÇÿ®ŸäŸÜ (ŸÖÿµŸÅŸâ)", # Guessed translation
    "info_no_observer_data_filtered": "ŸÑŸÖ Ÿäÿ™ŸÖ ÿßŸÑÿπÿ´Ÿàÿ± ÿπŸÑŸâ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿ±ÿßŸÇÿ® ŸÑŸÑŸÖÿ±ÿ¥ÿ≠ÿßÿ™ ÿßŸÑŸÖÿ≠ÿØÿØÿ©.", # Guessed translation
    "info_no_observation_data_filtered": "ŸÑŸÖ Ÿäÿ™ŸÖ ÿßŸÑÿπÿ´Ÿàÿ± ÿπŸÑŸâ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ≤Ÿäÿßÿ±ÿ© ŸÑŸÑŸÖÿ±ÿ¥ÿ≠ÿßÿ™ ÿßŸÑŸÖÿ≠ÿØÿØÿ©.", # Updated translation
    "error_loading_analytics": "ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≠ŸÖŸäŸÑ ÿ£Ÿà ŸÖÿπÿßŸÑÿ¨ÿ© ÿßŸÑŸÖÿµŸÜŸÅ ŸÑŸÑÿ™ÿ≠ŸÑŸäŸÑÿßÿ™:", # Guessed translation
    "overall_score_label": "ÿßŸÑŸÜÿ™Ÿäÿ¨ÿ© ÿßŸÑÿ•ÿ¨ŸÖÿßŸÑŸäÿ©:", # Guessed translation
    "overall_score_value": "**{:.2f}**", # Guessed translation
    "overall_score_na": "**ÿ∫Ÿäÿ± ŸÖÿ™ŸàŸÅÿ±**", # Guessed translation
    "arabic_toggle_label": "ÿπÿ±ÿ∂ ÿ®ÿßŸÑŸÑÿ∫ÿ© ÿßŸÑÿπÿ±ÿ®Ÿäÿ© (Display in Arabic)", # Keep English part as requested
    "feedback_log_sheet_name": "ÿ≥ÿ¨ŸÑ ÿßŸÑŸÖŸÑÿßÿ≠ÿ∏ÿßÿ™", # Guessed translation
    "feedback_log_header": ["ÿßŸÑŸàÿ±ŸÇÿ©", "ÿßŸÑŸÖÿπŸÑŸÖ", "ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä", "ÿßŸÑŸÖÿ±ÿßŸÇÿ®", "ÿßŸÑŸÖÿØÿ±ÿ≥ÿ©", "ÿßŸÑŸÖÿßÿØÿ©", "ÿßŸÑÿ™ÿßÿ±ŸäÿÆ", "ÿßŸÑŸÖŸÑÿÆÿµ"], # Guessed translation
    "download_feedback_log_csv": "üì• ÿ™ŸÜÿ≤ŸäŸÑ ÿ≥ÿ¨ŸÑ ÿßŸÑŸÖŸÑÿßÿ≠ÿ∏ÿßÿ™ (CSV)", # Guessed translation
    "error_generating_log_csv": "ÿÆÿ∑ÿ£ ŸÅŸä ÿ•ŸÜÿ¥ÿßÿ° ÿ≥ÿ¨ŸÑ ÿßŸÑŸÖŸÑÿßÿ≠ÿ∏ÿßÿ™ CSV:", # Guessed translation
    "download_overall_avg_csv": "üì• ÿ™ŸÜÿ≤ŸäŸÑ ŸÖÿ™Ÿàÿ≥ÿ∑ÿßÿ™ ÿßŸÑŸÖÿ¨ÿßŸÑ ÿßŸÑÿ•ÿ¨ŸÖÿßŸÑŸäÿ© (CSV)", # Guessed translation
    "download_overall_avg_excel": "üì• ÿ™ŸÜÿ≤ŸäŸÑ ŸÖÿ™Ÿàÿ≥ÿ∑ÿßÿ™ ÿßŸÑŸÖÿ¨ÿßŸÑ ÿßŸÑÿ•ÿ¨ŸÖÿßŸÑŸäÿ© (Excel)", # Guessed translation
    "download_filtered_avg_csv": "üì• ÿ™ŸÜÿ≤ŸäŸÑ ŸÖÿ™Ÿàÿ≥ÿ∑ÿßÿ™ ÿßŸÑŸÖÿ¨ÿßŸÑ ÿßŸÑŸÖÿµŸÅÿßÿ© (CSV)", # Guessed translation
    "download_filtered_avg_excel": "üì• ÿ™ŸÜÿ≤ŸäŸÑ ŸÖÿ™Ÿàÿ≥ÿ∑ÿßÿ™ ÿßŸÑŸÖÿ¨ÿßŸÑ ÿßŸÑŸÖÿµŸÅÿßÿ© (Excel)", # Guessed translation
    "download_filtered_data_csv": "üì• ÿ™ŸÜÿ≤ŸäŸÑ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ≤Ÿäÿßÿ±ÿ© ÿßŸÑŸÖÿµŸÅÿßÿ© (CSV)", # Updated translation
    "download_filtered_data_excel": "üì• ÿ™ŸÜÿ≤ŸäŸÑ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ≤Ÿäÿßÿ±ÿ© ÿßŸÑŸÖÿµŸÅÿßÿ© (Excel)", # Updated translation
    "label_observation_date": "ÿ™ÿßÿ±ŸäÿÆ ÿßŸÑÿ≤Ÿäÿßÿ±ÿ©", # Updated translation
    "filter_start_date": "ÿ™ÿßÿ±ŸäÿÆ ÿßŸÑÿ®ÿØÿ°", # Guessed translation
    "filter_end_date": "ÿ™ÿßÿ±ŸäÿÆ ÿßŸÑÿßŸÜÿ™Ÿáÿßÿ°", # Guessed translation
    "filter_teacher": "ÿ™ÿµŸÅŸäÿ© ÿ≠ÿ≥ÿ® ÿßŸÑŸÖÿπŸÑŸÖ", # Guessed translation
    "subheader_teacher_performance": "ÿ£ÿØÿßÿ° ÿßŸÑŸÖÿπŸÑŸÖ ÿ®ŸÖÿ±Ÿàÿ± ÿßŸÑŸàŸÇÿ™", # Guessed translation
    "info_select_teacher": "ÿ≠ÿØÿØ ŸÖÿπŸÑŸÖŸãÿß ŸÑÿπÿ±ÿ∂ ÿ™ÿ≠ŸÑŸäŸÑÿßÿ™ ÿßŸÑÿ£ÿØÿßÿ° ÿßŸÑŸÅÿ±ÿØŸä.", # Guessed translation
    "info_no_obs_for_teacher": "ŸÑŸÖ Ÿäÿ™ŸÖ ÿßŸÑÿπÿ´Ÿàÿ± ÿπŸÑŸâ ÿ≤Ÿäÿßÿ±ÿßÿ™ ŸÑŸÑŸÖÿπŸÑŸÖ ÿßŸÑŸÖÿ≠ÿØÿØ ÿ∂ŸÖŸÜ ÿßŸÑŸÖÿ±ÿ¥ÿ≠ÿßÿ™ ÿßŸÑŸÖÿ∑ÿ®ŸÇÿ©.", # Updated translation
    "subheader_teacher_domain_trend": "ÿßÿ™ÿ¨ÿßŸá ÿ£ÿØÿßÿ° ŸÖÿ¨ÿßŸÑ {}", # Guessed translation
    "subheader_teacher_overall_avg": "ŸÖÿ™Ÿàÿ≥ÿ∑ ÿßŸÑÿØÿ±ÿ¨ÿ© ÿßŸÑÿ•ÿ¨ŸÖÿßŸÑŸä ŸÑŸÄ {} (ŸÖÿµŸÅŸâ)", # Guessed translation

    # Performance Level Descriptors (Arabic) - **Translate these**
    "perf_level_very_weak": "ÿ∂ÿπŸäŸÅ ÿ¨ÿØÿßŸã", # Guessed translation
    "perf_level_weak": "ÿ∂ÿπŸäŸÅ", # Guessed translation
    "perf_level_acceptable": "ŸÖŸÇÿ®ŸàŸÑ", # Guessed translation
    "perf_level_good": "ÿ¨ŸäÿØ", # Guessed translation
    "perf_level_excellent": "ŸÖŸÖÿ™ÿßÿ≤", # Guessed translation

    # Support Plan / Next Steps Text (Arabic) - **Translate and Customize these extensively**
    # More detailed recommendations based on performance levels
    "plan_very_weak_overall": "ÿßŸÑÿ£ÿØÿßÿ° ÿßŸÑÿ•ÿ¨ŸÖÿßŸÑŸä ÿ∂ÿπŸäŸÅ ÿ¨ÿØÿßŸã. ÿ™ÿ™ÿ∑ŸÑÿ® ÿÆÿ∑ÿ© ÿØÿπŸÖ ÿ¥ÿßŸÖŸÑÿ©. ÿ±ŸÉÿ≤ ÿπŸÑŸâ ÿßŸÑŸÖŸÖÿßÿ±ÿ≥ÿßÿ™ ÿßŸÑÿ™ÿπŸÑŸäŸÖŸäÿ© ÿßŸÑÿ£ÿ≥ÿßÿ≥Ÿäÿ© ŸÖÿ´ŸÑ ÿ•ÿØÿßÿ±ÿ© ÿßŸÑÿµŸÅÿå Ÿàÿ™ÿÆÿ∑Ÿäÿ∑ ÿßŸÑÿØÿ±ÿ≥ÿå ŸàÿßŸÑÿßÿ≥ÿ™ÿ±ÿßÿ™Ÿäÿ¨Ÿäÿßÿ™ ÿßŸÑÿ™ÿπŸÑŸäŸÖŸäÿ© ÿßŸÑÿ£ÿ≥ÿßÿ≥Ÿäÿ©. ÿßÿ∑ŸÑÿ® ÿßŸÑÿ™Ÿàÿ¨ŸäŸá ŸÖŸÜ ŸÖÿπŸÑŸÖŸÉ ÿßŸÑŸÖŸàÿ¨Ÿá ŸàŸÇŸäÿßÿØÿ© ÿßŸÑŸÖÿØÿ±ÿ≥ÿ©.", # Guessed translation - Enhanced
    "plan_weak_overall": "ÿßŸÑÿ£ÿØÿßÿ° ÿßŸÑÿ•ÿ¨ŸÖÿßŸÑŸä ÿ∂ÿπŸäŸÅ. ŸäŸàÿµŸâ ÿ®ÿÆÿ∑ÿ© ÿØÿπŸÖ. ÿ≠ÿØÿØ 1-2 ŸÖŸÜ ÿßŸÑŸÖÿ¨ÿßŸÑÿßÿ™ ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ© ŸÑŸÑÿ™ÿ≠ÿ≥ŸäŸÜ ŸÖŸÜ ÿßŸÑŸÖŸÑÿßÿ≠ÿ∏ÿ© ŸàÿßÿπŸÖŸÑ ŸÖÿπ ŸÖÿπŸÑŸÖŸÉ ÿßŸÑŸÖŸàÿ¨Ÿá ŸÑÿ™ÿ∑ŸàŸäÿ± ÿßÿ≥ÿ™ÿ±ÿßÿ™Ÿäÿ¨Ÿäÿßÿ™ ŸÖÿ≥ÿ™ŸáÿØŸÅÿ©. ŸÅŸÉÿ± ŸÅŸä ŸÖŸÑÿßÿ≠ÿ∏ÿ© ÿßŸÑÿ≤ŸÖŸÑÿßÿ° ÿ∞ŸàŸä ÿßŸÑÿÆÿ®ÿ±ÿ© ŸÅŸä Ÿáÿ∞Ÿá ÿßŸÑŸÖÿ¨ÿßŸÑÿßÿ™.", # Guessed translation - Enhanced
    "plan_weak_domain": "ÿßŸÑÿ£ÿØÿßÿ° ŸÅŸä **{}** ÿ∂ÿπŸäŸÅ. ÿ±ŸÉÿ≤ ÿπŸÑŸâ ÿ™ÿ∑ŸàŸäÿ± ÿßŸÑŸÖŸáÿßÿ±ÿßÿ™ ÿßŸÑŸÖÿ™ÿπŸÑŸÇÿ© ÿ®ŸÄ: {}. ÿßŸÑÿ•ÿ¨ÿ±ÿßÿ°ÿßÿ™ ÿßŸÑŸÖŸÇÿ™ÿ±ÿ≠ÿ© ÿ™ÿ¥ŸÖŸÑ: [ÿ•ÿ¨ÿ±ÿßÿ° ŸÖÿ≠ÿØÿØ 1]ÿå [ÿ•ÿ¨ÿ±ÿßÿ° ŸÖÿ≠ÿØÿØ 2].", # Guessed translation - Enhanced
    "steps_acceptable_overall": "ÿßŸÑÿ£ÿØÿßÿ° ÿßŸÑÿ•ÿ¨ŸÖÿßŸÑŸä ŸÖŸÇÿ®ŸàŸÑ. ÿßÿ≥ÿ™ŸÖÿ± ŸÅŸä ÿßŸÑÿ®ŸÜÿßÿ° ÿπŸÑŸâ ŸÜŸÇÿßÿ∑ ŸÇŸàÿ™ŸÉ. ÿ≠ÿØÿØ ŸÖÿ¨ÿßŸÑŸãÿß Ÿàÿßÿ≠ÿØŸãÿß ŸÑŸÑŸÜŸÖŸà ŸÑÿ™ÿ≠ÿ≥ŸäŸÜ ŸÖŸÖÿßÿ±ÿ≥ÿ™ŸÉ Ÿàÿ™ÿπÿ≤Ÿäÿ≤ ÿ™ÿπŸÑŸÖ ÿßŸÑÿ∑ŸÑÿßÿ®.", # Guessed translation - Enhanced
    "steps_good_overall": "ÿßŸÑÿ£ÿØÿßÿ° ÿßŸÑÿ•ÿ¨ŸÖÿßŸÑŸä ÿ¨ŸäÿØ. ÿ£ŸÜÿ™ ÿ™ÿ∏Ÿáÿ± ŸÖŸÖÿßÿ±ÿ≥ÿßÿ™ ÿ™ÿπŸÑŸäŸÖŸäÿ© ŸÅÿπÿßŸÑÿ©. ÿßÿ≥ÿ™ŸÉÿ¥ŸÅ ŸÅÿ±ÿµ ŸÖÿ¥ÿßÿ±ŸÉÿ© ÿÆÿ®ÿ±ÿ™ŸÉ ŸÖÿπ ÿßŸÑÿ≤ŸÖŸÑÿßÿ°ÿå ÿ±ÿ®ŸÖÿß ŸÖŸÜ ÿÆŸÑÿßŸÑ ÿßŸÑÿ™Ÿàÿ¨ŸäŸá ÿ∫Ÿäÿ± ÿßŸÑÿ±ÿ≥ŸÖŸä ÿ£Ÿà ÿ™ŸÇÿØŸäŸÖ ÿßÿ≥ÿ™ÿ±ÿßÿ™Ÿäÿ¨Ÿäÿßÿ™ ŸÜÿßÿ¨ÿ≠ÿ©.", # Guessed translation - Enhanced
    "steps_good_domain": "ÿßŸÑÿ£ÿØÿßÿ° ŸÅŸä **{}** ÿ¨ŸäÿØ. ÿ£ŸÜÿ™ ÿ™ÿ∏Ÿáÿ± ŸÖŸáÿßÿ±ÿßÿ™ ŸÇŸàŸäÿ© ŸÅŸä Ÿáÿ∞ÿß ÿßŸÑŸÖÿ¨ÿßŸÑ. ŸÅŸÉÿ± ŸÅŸä ÿßÿ≥ÿ™ŸÉÿ¥ÿßŸÅ ÿßÿ≥ÿ™ÿ±ÿßÿ™Ÿäÿ¨Ÿäÿßÿ™ ŸÖÿ™ŸÇÿØŸÖÿ© ÿ™ÿ™ÿπŸÑŸÇ ÿ®ŸÄ: {}. ÿßŸÑÿ•ÿ¨ÿ±ÿßÿ°ÿßÿ™ ÿßŸÑŸÖŸÇÿ™ÿ±ÿ≠ÿ© ÿ™ÿ¥ŸÖŸÑ: [ÿ•ÿ¨ÿ±ÿßÿ° ŸÖÿ™ŸÇÿØŸÖ ŸÖÿ≠ÿØÿØ 1]ÿå [ÿ•ÿ¨ÿ±ÿßÿ° ŸÖÿ™ŸÇÿØŸÖ ŸÖÿ≠ÿØÿØ 2].", # Guessed translation - Enhanced
    "steps_excellent_overall": "ÿßŸÑÿ£ÿØÿßÿ° ÿßŸÑÿ•ÿ¨ŸÖÿßŸÑŸä ŸÖŸÖÿ™ÿßÿ≤. ÿ£ŸÜÿ™ ŸÜŸÖŸàÿ∞ÿ¨ Ÿäÿ≠ÿ™ÿ∞Ÿâ ÿ®Ÿá ŸÅŸä ÿßŸÑÿ™ÿØÿ±Ÿäÿ≥ ÿßŸÑŸÅÿπÿßŸÑ. ŸÅŸÉÿ± ŸÅŸä ŸÇŸäÿßÿØÿ© ÿ¨ŸÑÿ≥ÿßÿ™ ÿßŸÑÿ™ÿ∑ŸàŸäÿ± ÿßŸÑŸÖŸáŸÜŸä ÿ£Ÿà ÿ™Ÿàÿ¨ŸäŸá ÿßŸÑŸÖÿπŸÑŸÖŸäŸÜ ÿßŸÑÿ£ŸÇŸÑ ÿÆÿ®ÿ±ÿ©.", # Guessed translation - Enhanced
    "steps_excellent_domain": "ÿßŸÑÿ£ÿØÿßÿ° ŸÅŸä **{}** ŸÖŸÖÿ™ÿßÿ≤. ŸÖŸÖÿßÿ±ÿ≥ÿ™ŸÉ ŸÅŸä Ÿáÿ∞ÿß ÿßŸÑŸÖÿ¨ÿßŸÑ ŸÜŸÖŸàÿ∞ÿ¨Ÿäÿ©. ÿßÿ≥ÿ™ŸÖÿ± ŸÅŸä ÿßŸÑÿßÿ®ÿ™ŸÉÿßÿ± Ÿàÿ™ÿ≠ÿ≥ŸäŸÜ ŸÖŸÖÿßÿ±ÿ≥ÿ™ŸÉÿå ÿ±ÿ®ŸÖÿß ŸÖŸÜ ÿÆŸÑÿßŸÑ ÿßŸÑÿ®ÿ≠ÿ´ Ÿàÿ™ÿ∑ÿ®ŸäŸÇ ÿßÿ≥ÿ™ÿ±ÿßÿ™Ÿäÿ¨Ÿäÿßÿ™ ÿ≠ÿØŸäÿ´ÿ© ÿ™ÿ™ÿπŸÑŸÇ ÿ®ŸÄ: {}.", # Guessed translation - Enhanced
    "no_specific_plan_needed": "ÿßŸÑÿ£ÿØÿßÿ° ÿπŸÜÿØ ŸÖÿ≥ÿ™ŸàŸâ ŸÖŸÇÿ®ŸàŸÑ ÿ£Ÿà ÿ£ÿπŸÑŸâ. ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿÆÿ∑ÿ© ÿØÿπŸÖ ŸÅŸàÿ±Ÿäÿ© ŸÖÿ∑ŸÑŸàÿ®ÿ© ÿ®ŸÜÿßÿ°Ÿã ÿπŸÑŸâ Ÿáÿ∞Ÿá ÿßŸÑŸÖŸÑÿßÿ≠ÿ∏ÿ©. ÿ±ŸÉÿ≤ ÿπŸÑŸâ ÿßŸÑÿ™ÿ≠ÿ≥ŸäŸÜ ÿßŸÑŸÖÿ≥ÿ™ŸÖÿ± ÿ®ŸÜÿßÿ°Ÿã ÿπŸÑŸâ ÿ£ŸáÿØÿßŸÅŸÉ ÿßŸÑŸÖŸáŸÜŸäÿ©." # Guessed translation - Enhanced
}

# --- Function to get strings based on language toggle ---
def get_strings(arabic_mode):
    return ar_strings if arabic_mode else en_strings

# --- Function to determine performance level based on score ---
def get_performance_level(score, strings):
    if score is None or (isinstance(score, float) and math.isnan(score)):
        return strings["overall_score_na"] # Or a specific string for no score
    # Ensure score is treated as a number for comparison
    try:
        numeric_score = float(score)
        if numeric_score >= 5.5: # Example thresholds - Adjust as needed
            return strings["perf_level_excellent"]
        elif numer
